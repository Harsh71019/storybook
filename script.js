// ============================================================
// TRANSLATIONS
// ============================================================

const translations = {
  en: {
    'hero.eyebrow':      'A Sacred Legend',
    'hero.title':        'Garv Haran',
    'hero.subtitle':     'The Destruction of Ego',
    'hero.desc':         'How Lord Vishnu, through the humble devotion of Hanuman,<br>shattered the pride of his closest and most powerful associates.',
    'hero.btn':          'Read the Story',

    'intro.label':       'The Setting',
    'intro.title':       'Three Egos, One Lesson',
    'intro.text':        'Lord Krishna — an avatar of Vishnu — noticed that three beings closest to him had fallen into the trap of <em>ahankar</em> (ego). Rather than punish them, he devised a beautiful plan — to send Hanuman, the greatest devotee, as the mirror that would reflect their pride back at them.',

    'garuda.role':       'Divine Vehicle of Vishnu',
    'garuda.ego':        '"No one in creation flies faster than me."',
    'sudarshan.name':    'Sudarshan Chakra',
    'sudarshan.role':    'The Ultimate Divine Weapon',
    'sudarshan.ego':     '"Nothing in existence can stop or withstand me."',
    'satyabhama.role':   'Queen & Wife of Lord Krishna',
    'satyabhama.ego':    '"No woman in all three worlds is more beautiful than me."',

    'ch1.title':         'The Race with Garuda',
    'ch1.p1':            'Krishna sent Garuda — the king of birds and lord of the skies — to the Gandhamadan mountain with a message: invite Hanuman to Dwarka. Garuda flew at his absolute peak, the wind bending around his mighty wings.',
    'ch1.p2':            'He found Hanuman calmly sitting under a tree, chanting <em>"Rama… Rama… Rama…"</em> Garuda delivered the invitation. Hanuman simply nodded and said, <strong>"You go ahead. I will follow."</strong>',
    'ch1.p3':            'Garuda smirked inwardly — <em>an old monkey walking to Dwarka?</em> — and flew back with all his speed. But when he landed at the palace gates, his heart stopped. Hanuman was already there, seated serenely before Krishna, as if he had been waiting for hours.',
    'ch1.moral-label':   'Ego shattered',
    'ch1.moral-text':    'The pride of speed dissolved in an instant.',

    'ch2.title':         'The Encounter with Sudarshan Chakra',
    'ch2.p1':            'Before Hanuman\'s arrival, Krishna had commanded Sudarshan Chakra to guard the palace gate — to stop anyone from entering without permission. The Chakra spun with blazing ferocity, confident that no force in existence could pass through it.',
    'ch2.p2':            'When Hanuman arrived and found the spinning discus blocking his path, he did not stop. He did not flinch. He simply reached out and <strong>caught the Sudarshan Chakra in his palm.</strong>',
    'ch2.p3':            'In some accounts, Hanuman placed the Chakra inside his cheek — the way one holds a betel nut — and walked right in. He then calmly walked up to Krishna and placed the Chakra at his feet. The most feared weapon in creation had been rendered a harmless trinket by Hanuman\'s devotion.',
    'ch2.moral-label':   'Ego shattered',
    'ch2.moral-text':    'The pride of invincible power crumbled to dust.',

    'ch3.title':         'The Question to Satyabhama',
    'ch3.p1':            'Inside the palace, Krishna had arranged one final test. He asked Satyabhama to dress as Goddess Sita, knowing that Hanuman — the eternal devotee of Ram — would surely be struck by her beauty. Satyabhama adorned herself in her finest silk and jewellery, certain that even a monkey sage would be dazzled.',
    'ch3.p2':            'When Hanuman entered, he immediately bowed to Krishna, seeing him as his Rama. Then he glanced toward Satyabhama. He paused. He tilted his head, genuinely puzzled, and asked with complete innocence:',
    'ch3.quote':         '"My Lord… where is Mother Sita? And who is this <em>maidservant</em> sitting beside you?"',
    'ch3.p3':            'The palace fell silent. Satyabhama\'s ornaments suddenly felt very heavy. She had dressed to be worshipped as a goddess — and had been seen as a servant. Not out of cruelty, but because Hanuman\'s heart held only one form of beauty: that of Mother Sita.',
    'ch3.moral-label':   'Ego shattered',
    'ch3.moral-text':    'The pride of beauty was extinguished by pure devotion.',

    'concl.label':       'The Revelation',
    'concl.title':       'Krishna\'s Teaching',
    'concl.p1':          'After all three had been humbled, Lord Krishna revealed his divine form — radiant, infinite, all-knowing. He spoke to them gently, without reproach:',
    'concl.quote':       '"Speed, power, and beauty — these are not yours. They are gifts I placed within you for my service. The moment you claimed them as your own and became proud of them, you forgot me. And in forgetting me, you lost the very source of your greatness."',
    'concl.p2':          'Garuda bowed his mighty head. Sudarshan Chakra rested still at Krishna\'s feet. Satyabhama wept with gratitude. And Hanuman sat quietly in the corner, lost in the name of Ram, unaware that he had just been the instrument of one of the greatest divine lessons ever given.',

    'moral1.title':      'Strength is Borrowed',
    'moral1.text':       'Every gift — speed, power, beauty, intelligence — comes from the Divine. Owning it as yours is the root of ego.',
    'moral2.title':      'Devotion Transcends All',
    'moral2.text':       'Hanuman carried no pride. He was simply devoted. And that devotion made him untouchable by any weapon and unreachable by any creature.',
    'moral3.title':      'God Uses Mirrors',
    'moral3.text':       'Krishna did not scold or punish. He held up a mirror — Hanuman — so that each could see their own ego reflected and dissolved.',

    'footer.sub':        'Garv Haran · A Sacred Legend of Humility',
  },

  hi: {
    'hero.eyebrow':      'एक पवित्र कथा',
    'hero.title':        'गर्व हरण',
    'hero.subtitle':     'अहंकार का नाश',
    'hero.desc':         'भगवान विष्णु ने, हनुमान की विनम्र भक्ति के माध्यम से,<br>अपने सबसे निकट और शक्तिशाली सहयोगियों का अभिमान चूर किया।',
    'hero.btn':          'कथा पढ़ें',

    'intro.label':       'पृष्ठभूमि',
    'intro.title':       'तीन अहंकार, एक सीख',
    'intro.text':        'भगवान कृष्ण — विष्णु के अवतार — ने देखा कि उनके तीन अत्यंत निकटजन <em>अहंकार</em> के जाल में आ गए थे। उन्हें罚 देने के बजाय, उन्होंने एक सुंदर योजना बनाई — हनुमान को, जो सर्वश्रेष्ठ भक्त हैं, उस दर्पण के रूप में भेजा जो प्रत्येक के अभिमान को उनके सामने प्रतिबिंबित कर सके।',

    'garuda.role':       'विष्णु का दिव्य वाहन',
    'garuda.ego':        '"सृष्टि में मुझसे तेज कोई नहीं उड़ सकता।"',
    'sudarshan.name':    'सुदर्शन चक्र',
    'sudarshan.role':    'परम दिव्य अस्त्र',
    'sudarshan.ego':     '"मुझे कोई भी रोक या सहन नहीं कर सकता।"',
    'satyabhama.role':   'रानी एवं भगवान कृष्ण की पत्नी',
    'satyabhama.ego':    '"तीनों लोकों में मुझसे अधिक सुंदर कोई स्त्री नहीं।"',

    'ch1.title':         'गरुड़ के साथ दौड़',
    'ch1.p1':            'कृष्ण ने गरुड़ को — पक्षिराज और आकाश के स्वामी को — गंधमादन पर्वत पर यह संदेश लेकर भेजा: हनुमान को द्वारका आमंत्रित करो। गरुड़ अपनी पूरी गति से उड़े, उनके विशाल पंखों के आगे हवा भी झुक गई।',
    'ch1.p2':            'वे हनुमान को एक वृक्ष के नीचे शांत बैठे, <em>"राम… राम… राम…"</em> का जाप करते हुए पाया। गरुड़ ने निमंत्रण दिया। हनुमान ने बस सिर हिलाया और कहा, <strong>"आप आगे जाइए। मैं आता हूँ।"</strong>',
    'ch1.p3':            'गरुड़ ने मन ही मन मुस्कुराया — <em>बूढ़ा बंदर पैदल द्वारका जाएगा?</em> — और पूरी शक्ति से वापस उड़ चले। किन्तु जब वे महल के द्वार पर उतरे, तो उनका हृदय रुक गया। हनुमान पहले से वहाँ विराजमान थे — कृष्ण के सम्मुख शांत भाव से बैठे, जैसे घंटों से वहाँ हों।',
    'ch1.moral-label':   'गर्व चूर हुआ',
    'ch1.moral-text':    'गति का अभिमान पल भर में धूल में मिल गया।',

    'ch2.title':         'सुदर्शन चक्र से सामना',
    'ch2.p1':            'हनुमान के आगमन से पूर्व, कृष्ण ने सुदर्शन चक्र को महल के द्वार की रक्षा का आदेश दिया था — किसी को भी बिना अनुमति प्रवेश न करने देना। चक्र प्रचंड वेग से घूम रहा था, इस विश्वास के साथ कि कोई भी शक्ति इसे पार नहीं कर सकती।',
    'ch2.p2':            'जब हनुमान पहुँचे और घूमते चक्र को मार्ग में पाया, तो वे रुके नहीं। विचलित नहीं हुए। उन्होंने बस हाथ बढ़ाया और <strong>सुदर्शन चक्र को हथेली में थाम लिया।</strong>',
    'ch2.p3':            'कुछ कथाओं में बताया गया है कि हनुमान ने चक्र को अपने गाल के अंदर रख लिया — जैसे कोई पान रखता है — और सीधे अंदर चले गए। फिर शांत भाव से कृष्ण के पास आए और चक्र उनके चरणों में रख दिया। सृष्टि का सबसे भयंकर अस्त्र हनुमान की भक्ति के आगे एक साधारण वस्तु बन गया।',
    'ch2.moral-label':   'गर्व चूर हुआ',
    'ch2.moral-text':    'अपराजेय शक्ति का अभिमान धूल में मिल गया।',

    'ch3.title':         'सत्यभामा से प्रश्न',
    'ch3.p1':            'महल के भीतर कृष्ण ने अंतिम परीक्षा की व्यवस्था की। उन्होंने सत्यभामा को देवी सीता के रूप में सजने को कहा, यह जानते हुए कि हनुमान — राम के नित्य भक्त — उनकी सुंदरता से अवश्य प्रभावित होंगे। सत्यभामा ने अपने सर्वश्रेष्ठ रेशमी वस्त्र और आभूषण पहने, इस विश्वास से कि एक वानर ऋषि भी चकित हो जाएगा।',
    'ch3.p2':            'जब हनुमान प्रवेश किए, उन्होंने तुरंत कृष्ण को प्रणाम किया, उनमें अपने राम का दर्शन करते हुए। फिर सत्यभामा की ओर देखा। रुके। सिर टेढ़ा किया और सच्ची जिज्ञासा से पूछा:',
    'ch3.quote':         '"हे प्रभु… माता सीता कहाँ हैं? और यह <em>दासी</em> जो आपके पास बैठी है, वह कौन है?"',
    'ch3.p3':            'महल में सन्नाटा छा गया। सत्यभामा के आभूषण अचानक बोझिल लगने लगे। वे देवी की तरह पूजी जाने के लिए सजी थीं — और एक सेविका समझी गईं। क्रूरता से नहीं, बल्कि इसलिए क्योंकि हनुमान के हृदय में केवल एक ही सौंदर्य का स्थान था: माता सीता का।',
    'ch3.moral-label':   'गर्व चूर हुआ',
    'ch3.moral-text':    'सुंदरता का अभिमान शुद्ध भक्ति के आगे बुझ गया।',

    'concl.label':       'दिव्य ज्ञान',
    'concl.title':       'कृष्ण की शिक्षा',
    'concl.p1':          'तीनों के अहंकार के चूर होने के बाद, भगवान कृष्ण ने अपना दिव्य स्वरूप प्रकट किया — दीप्तिमान, अनंत, सर्वज्ञ। उन्होंने उन्हें सौम्यता से, बिना कोई उलाहना दिए, इस प्रकार कहा:',
    'concl.quote':       '"गति, शक्ति और सौंदर्य — ये तुम्हारे नहीं हैं। ये मेरी सेवा के लिए तुम्हें दी गई देन हैं। जिस क्षण तुमने इन्हें अपना मान लिया और इन पर घमंड करने लगे, तुम मुझे भूल गए। और मुझे भूलकर तुमने अपनी महानता का स्रोत ही खो दिया।"',
    'concl.p2':          'गरुड़ ने अपना शक्तिशाली सिर झुका लिया। सुदर्शन चक्र कृष्ण के चरणों में स्थिर हो गया। सत्यभामा कृतज्ञता के आँसुओं से रोने लगीं। और हनुमान एक कोने में चुपचाप बैठे रहे, राम नाम में खोए हुए — यह जाने बिना कि वे अभी ईश्वर द्वारा दिए गए सबसे महान दिव्य पाठ के माध्यम बने थे।',

    'moral1.title':      'शक्ति उधार की है',
    'moral1.text':       'हर देन — गति, शक्ति, सुंदरता, बुद्धि — परमात्मा से आती है। इसे अपना मानना ही अहंकार की जड़ है।',
    'moral2.title':      'भक्ति सर्वोपरि है',
    'moral2.text':       'हनुमान में कोई अभिमान न था। वे बस भक्त थे। और उस भक्ति ने उन्हें किसी भी अस्त्र से अभेद्य और किसी भी प्राणी से अजेय बना दिया।',
    'moral3.title':      'ईश्वर दर्पण का उपयोग करते हैं',
    'moral3.text':       'कृष्ण ने न डाँटा, न दंड दिया। उन्होंने एक दर्पण उठाया — हनुमान — ताकि प्रत्येक अपना अहंकार उसमें देख सके और वह विसर्जित हो जाए।',

    'footer.sub':        'गर्व हरण · विनम्रता की एक पवित्र कथा',
  }
};

// ============================================================
// LANGUAGE TOGGLE
// ============================================================

let currentLang = 'en';

function applyTranslations(lang) {
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.dataset.i18n;
    if (translations[lang][key] !== undefined) {
      el.innerHTML = translations[lang][key];
    }
  });

  // Toggle Hindi font class on body
  document.body.classList.toggle('lang-hi', lang === 'hi');

  // Update toggle button labels
  document.getElementById('langLabel').textContent  = lang === 'en' ? 'EN' : 'हिं';
  document.getElementById('langOther').textContent  = lang === 'en' ? 'हिं' : 'EN';

  // Update html lang attribute
  document.documentElement.lang = lang === 'hi' ? 'hi' : 'en';
}

document.getElementById('langToggle').addEventListener('click', () => {
  currentLang = currentLang === 'en' ? 'hi' : 'en';

  // Animate swap
  const btn = document.getElementById('langToggle');
  btn.style.transform = 'scale(0.92)';
  setTimeout(() => { btn.style.transform = ''; }, 180);

  applyTranslations(currentLang);
});

// ============================================================
// INTERSECTION OBSERVER — reveal animations
// ============================================================

const observerOptions = {
  root: null,
  rootMargin: '0px 0px -80px 0px',
  threshold: 0.12
};

const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (!entry.isIntersecting) return;
    const el = entry.target;
    const delay = el.dataset.delay ? parseInt(el.dataset.delay) : 0;
    setTimeout(() => { el.classList.add('visible'); }, delay);
    observer.unobserve(el);
  });
}, observerOptions);

document.querySelectorAll('.ego-card').forEach(card => observer.observe(card));
document.querySelectorAll('.chapter').forEach(chapter => observer.observe(chapter));

document.querySelectorAll('.moral-card').forEach((card, i) => {
  card.style.opacity = '0';
  card.style.transform = 'translateY(28px)';
  card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';

  const mo = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (!entry.isIntersecting) return;
      setTimeout(() => {
        card.style.opacity = '1';
        card.style.transform = 'translateY(0)';
      }, i * 120);
      mo.unobserve(card);
    });
  }, observerOptions);
  mo.observe(card);
});

const conclusionScene = document.querySelector('.conclusion__scene');
if (conclusionScene) {
  conclusionScene.style.opacity = '0';
  conclusionScene.style.transform = 'translateY(40px)';
  conclusionScene.style.transition = 'opacity 0.8s ease, transform 0.8s ease';

  const co = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (!entry.isIntersecting) return;
      conclusionScene.style.opacity = '1';
      conclusionScene.style.transform = 'translateY(0)';
      co.unobserve(conclusionScene);
    });
  }, observerOptions);
  co.observe(conclusionScene);
}

// ============================================================
// HERO PARALLAX
// ============================================================

const hero = document.querySelector('.hero');

window.addEventListener('scroll', () => {
  const scrollY = window.scrollY;
  if (hero && scrollY < window.innerHeight) {
    const heroContent = hero.querySelector('.hero__content');
    if (heroContent) {
      heroContent.style.transform = `translateY(${scrollY * 0.18}px)`;
      heroContent.style.opacity = 1 - (scrollY / (window.innerHeight * 0.7));
    }
  }
}, { passive: true });
